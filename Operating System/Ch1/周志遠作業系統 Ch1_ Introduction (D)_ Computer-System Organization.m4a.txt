undefined
我們講完了interrupt的機制之後，這個是在處理計算方面，我們電腦架構的原則。接下來，我們就講電腦的運作當中，在儲存應該說，在資料的讀取的過程中，它處理的基本的方式這其實大家都一定很熟悉，就是會發現我們的電腦很重要，就是要處理資料，而且這個資料很多是常駐的像我們的檔案，所以這些資料在我們的電腦的架構裡面的儲存其實是透過一個 Hierarchical 的架構

也就是越上面的就是越快，但是它的空間越小對不對越下沉的，它就是存越多資料但是它的速度就會越慢那當然價格也會越便宜所以有很多的因素造成了這樣子一個hierarchical的結果，那當然你可以說我很有錢是不是我就全部都是某一個這個儲存當然可以啦，所以你今天 build 一個電腦沒有人說一定要

長什麼樣子啊，所以這是很有彈性的只是說你會發現在有限的錢跟你考慮效率對不對你的價值 efficiency 的角度的話，你會發現用一個 hierarchical 的方式通常可以達到最好的結果也就是你今天再花更多的錢也不會讓它變更快那其實最好就是適度的用一個 hierarchy可是每一層到底，它的大小要多大多小到底要放什麼資料這就看你的設計囹對不對，

所以設計好的人他就可以就會表現比較好，設計不好的你花很多錢下去裝了很多的Memory怎麼不會變快這當然也是有的但是他是一個Hierarchy那我們就來這個介紹一下為什麼會成為一個Hierarchy就像我們剛剛說的這個所有的儲存的這些device大家應該大部分都還蠻熟悉的啦對不對我剛才沒有仔細的go through啦不過上面是register嘛CPU裡面的對不對那接下來

會有cache你們學過computer architecture就會知道我們有所謂的L1 L2 L3就好多個layer的cache我們之前介紹Multi-core的processor希望大家還記得也有所謂的Cache對不對而且Cache是比較上層的Cache可能是每一個Core有自己的下層的L2 L3可能是Share共用的所以有些問題要處理那Memory當然大家知道這是最主要的而且是CPU可以Access的剩下所有的就是我們統稱的Secondary的Storage除了MemoryMemory下面的

那當然就從這個Hard Drive 對不對然後到了這個光碟 對不對到了Tape大家不要覺得好笑怎麼還畫Tape是不是過時啦Tape就像那個以前的那個影帶一樣不是這樣子的喔現在的電腦系統最Fancy的系統裡面儲存的最後一層仍然是Tape第一個它便宜啦這個存的東西可以多啦，他有一個很重要的好處，他不太容易壞跟其他比像這個硬碟有沒有

丟一下他就爆了對不對。 SSD你可以澆澆水看看，他是會壞掉，這個除非你是垂他地震把他壓爛了，不然他都可以運作，所以其實比較reliable的怎麼樣讓他快，是另外一回事而且這個你有hierarchy，所以其實真正的大型的系統最後的Storage的最後一層仍然是所謂的Tape System坐在後面，但是你需要很多層在上面來

加速，那大家可能有聽過吧。 Flash有沒有或是Non-Violet Tile的Memory儲存，這邊其實技術也不斷的在進步，不要以為它是很古老的東西了。其實有Flash就像SSD，大家接下來已經非常普及了對不對。那還有甚至於是Memory可是，它是Non-Volatile，就是它不會因為你把電關掉資料就會遺失，都有所以這個Hierarchy，這個只是僅供參考，這是最Traditional最Standard。其實現在有很多新的Store Devices會插在這個的中間，那看你怎麼去選擇好，很好，但是呢它絕對不會跑掉的就是剛才說的三件事，

這個速度所以上層的速度一定快，是他做出來的製程的方式第二是錢對不对，這避免不了你一定要考慮到錢這件事。最後一個就是我剛才說的Volatile或Non-Vol atile這個非常非常重要因為Volatile的意思就是你會關掉之後他就會移失就像Memory大家知道的Memory啊CashMemory以上的那些全部是Volatile

所以最大的問題就是今天如果有一個error你的system crash了你的資料就沒了這個是沒辦法的所以造成他們的一個缺點所以才說有現在這種最新的non-volatile的memory跑出來這個帶來無限的希望對不對因為它是memorysupposedly大概差不多快而且它不會因為斷電就沒有所以可以想見是非常好的一個solution

當然它的錢比較貴囉所以還是在 Hierarchical 的中間而已你也不可能全部都用 Non-Volatile Memory好 那就像我們剛剛說的這個儲存這邊最重要的一個分隔點其實就是 MemMemory 這一層因為回到了你們之前最早介紹 Computer我們說這個 Monumen 的 Computer ArchitectureMemory CPU 跟 IODeviceMemory是那裡面的其中之一所

以Memory是不會變只是你可以在上面下面加入很多東西可是Memory還是最主要的而且它之所以主要原因就是因為它就是CPU可以直接Access的這個De vice的最後一層了所以你必須要把資料放在Memory裡面它才能夠被CPU Access它上面你可以用很多層像Register啊Cache可是這些都只是Copy而已對不對

最後這些資料還是以Memory上面的資料為準那才是CPU可以執行的那它的技術當然就是RAM啦大家也都知道RAM嘛所以去買電腦插RAM就是指你在增加你的Memory嘛它的簡寫也就是Random Access Memory就是RAM的簡寫那就像我們剛才說的Memory以下的全部我們重稱為所謂的Secondary Storage

所以代表CPU沒辦法直接讀如果你要把資料放在那你想要讓CPU Access的話你必須要先把它搬到MemoryMemory裡面之後才能夠被讀所以會比較慢這是難免的而且越下沉一定越慢對不對所以我們才說Real-Time System讓他們接起來就是它Real-Time System不會有Secondary的Storage因為你還要在那邊做搬移、

Copy這太花時間了它要立刻可以Access才行好那Secondary的Storage呢它In general啦當然就是一定會有很多就會它的特色就是它一定會比較大因為它畢竟比較便宜還有一點呢它就是Non Vol atile所以，它這個斷電之後你的資料可以仍然保持的那Memory大家都知道它就是意思就是暫時的而已你就只能漏到Memory然後讓CPU開始執行

最標準的當然就硬碟了可是不要忘了現在有很多Devices，SSD還有很多Flash Non-Violetized Memory等等這些都是Secondary Storage，這個稍微知道就好這個跟OS畢竟比較無關可能電機系的可能會更熟一些就是這個RAN的做法其實這個所謂的RANDAM Access Memory其實它的製程的方式有分成所謂的DRAN跟SRAN那簡單來講就是DRAND的話，它只需要

一個Transistor所以它比較小，所以它比較便宜然後呢，它花的這個Power也比較少所以都很Efficient這樣子，但是呢，它的速度就是比較慢也就是我們的一般的Main Memory所以RAND裡面的Main Memory那最下層，那個之前或現在大部分還是，就是用DRAND去做啦，那差別的話呢，其實是比較多 improvement 的地方，在於SSD RAM 的那些bus，所以如果你去看買電腦的時候，他會跟你講他是 DDR

級，第一代，第二代，第三代Memory bus 是什麼，因為這些 device 其實速度都還算蠻快，大部分的問題其實是因為你有很多的 core因為我們電腦越來越多core， 我們教了嘛大家都搶著要去這個地方讀資料所以那個channel， 那個 bus常常才是真正的bottleneck，所以就會有不同的 protocol 不同的方式，那個把 channel 可以打開其實比較重要那至於 RAM 的速度其實就是那樣那它倒不是那么 critical

了現在好那另外一個技術呢很成熟的就是這個SRAM 了那所以差別一樣嘛就是比較大比較耗電等等，但速度就是快，所以它也比較貴，所以通常就是拿這個技術去做所謂的 cache 的部分L2 L3L1這些Cache的部分的Memory甚至於到Register就是用這樣的製程技術，所以大家只需要知道就是因為它製程技術的不同才會導致那個結果就是它的速度的影響還有它的吃的站的空間，它的Cost就是這樣的

一個結果，那大部分的這些Solution它都是有Tradeoff 的，因為越快的呢，它通常就越貴等等，為什麼因為，如果有任何一個技術他完全dominate另外一個的話誰還用舊的呢很快就被淘汰了嘛，所以你不會看到這樣的device的存在，這是很自然，所以未來還有沒有這些也不一定啊對不對，如果有一些真的有什麼新的technology發展出來又便宜又快又好，那當然你就被淘汰掉了，就會從那個 hierarchy上面消失了好，所以這只是要大家知道就是

不同技術所以才會造成的結果，但是那些叫Random Access就是意思是什麼咧，就是你讀取任何好， 講完這句話啦，任何位置的資料，它的時間都是一樣的今天，它不會因為你讀第一個by還是第100個by，它讀取的時間就不同，因為你是Random嘛，所以你希望你的讀取的速度可以一致，還記得我們講了NUMA跟UMA嗎？ 對不對，

所以這是很相關的，就是使用者都會希望系統提供的效能是一致的，我每一次Run的結果，它要一樣而且效能也要一樣，不然你很難去控制這台電腦，那Random Access的特性就是這樣，它可以保證它一樣的Access的速度，那我們等一下回來會講Disk就完全是另外一回事了，所以Disk它就會根據你讀寫的位置不同，它花的時間不同，那這是它的一個可以說是一個缺點好，那麼我們就休息十分鐘.